<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no">
  <!-- uc强制竖屏 -->
  <meta name="screen-orientation" content="portrait">
  <!-- UC强制全屏 -->
  <!-- <meta name="full-screen" content="yes"> -->
  <!-- UC应用模式 -->
  <!-- <meta name="browsermode" content="application"> -->
  <!-- QQ强制竖屏 -->
  <meta name="x5-orientation" content="portrait">
  <!-- QQ强制全屏 -->
  <meta name="x5-fullscreen" content="true">
  <!-- QQ应用模式 -->
  <meta name="x5-page-mode" content="app">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="theme-color" content="#6091ba">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>carpool - 溢起拼车</title>
  <link rel="stylesheet" type="text/css" href="./css/bootstrap.cp.min.css" />
  <!-- <link rel="stylesheet" type="text/css" href="./css/material-kit.css" /> -->
  <link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="./css/style.css?v=1" />
  <link rel="icon" sizes="80X80" href="./images/icon80.png">
  <link rel="apple-touch-icon" href="./images/icon196.png">
  <link rel="apple-touch-icon-precomposed" sizes="128x128" href="./images/icon196.png">

  <meta name="description" content="The Chinese Carpool website.">
  <meta name="keywords" content="Carpool China,拼车,CarpoolChina Website,Carpool Cube">
  <meta name="author" content="Kan">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="./js/common/html5shiv.js"></script>
    <script src="./js/common/respond.min.js"></script>
  <![endif]-->

<script type="text/javascript" src="./js/common/route.js"></script>
<script type="text/javascript" src="./js/common/jquery-1.12.4.min.js"></script>

<script type="text/javascript" src="./js/common/aui-toast.js"></script>
<script type="text/javascript" src="./js/common/aui-dialog.js"></script>

<script type="text/javascript" src="./js/common/picker.min.js"></script>
<script type="text/javascript" src="./js/common/pullRefresh.js"></script>

<script type="text/javascript" src="./js/cp.config.js?v=1"></script>
<script type="text/javascript" src="./js/cp.templates.js?v=1"></script>
<script type="text/javascript" src="./js/cp.commonfun.js?v=1"></script>
<!-- <script type="text/javascript" src="./js/common/db.min.js"></script> -->


</head>
<body >
  <div class="cp-all" >
    <div id="app"></div>
    <div class="cp-carpool-picwrapper">
      <img  src="./images/carpool.jpg" />
    </div>
    <div id = 'cp-map-hidden' class="hidden"></div>
  </div>

</body>

<script type="text/javascript" >
    var cVersions = Math.random();
   	spaRouters.map('/index',function(transition){
      spaRouters.asyncFun('./pages/index.js?v='+cVersions,transition)
  	})
  	spaRouters.map('/infoList',function(transition){
      spaRouters.asyncFun('./pages/infoList.js?v='+cVersions,transition)
  	})
    spaRouters.map('/wallList',function(transition){
      spaRouters.asyncFun('./pages/wallList.js?v='+cVersions,transition)
  	})
  	spaRouters.map('/myRoute',function(transition){
      spaRouters.asyncFun('./pages/myRouteList.js?v='+cVersions,transition)
  	})
    spaRouters.map('/infoView',function(transition){
      spaRouters.asyncFun('./pages/infoView.js?v='+cVersions,transition)
  	})
    spaRouters.map('/wallView',function(transition){
      spaRouters.asyncFun('./pages/wallView.js?v='+cVersions,transition)
  	})
    spaRouters.map('/addRoute',function(transition){
      spaRouters.asyncFun('./pages/addRoute.js?v='+cVersions,transition)
  	})
    spaRouters.map('/selectAddress',function(transition){
      spaRouters.asyncFun('./pages/selectAddress.js?v='+cVersions,transition)
  	})

    spaRouters.map('/selectMyAddress',function(transition){
      spaRouters.asyncFun('./pages/selectMyAddress.js?v='+cVersions,transition)
  	})
    spaRouters.map('/createAddress',function(transition){
      spaRouters.asyncFun('./pages/createAddress.js?v='+cVersions,transition)
    })
    spaRouters.map('/user',function(transition){
      spaRouters.asyncFun('./pages/user.js?v='+cVersions,transition)
  	})
    spaRouters.map('/profile',function(transition){
      spaRouters.asyncFun('./pages/userProfile.js?v='+cVersions,transition)
  	})
    spaRouters.map('/userAvatar',function(transition){
      spaRouters.asyncFun('./pages/userAvatar.js?v='+cVersions,transition)
  	})
    spaRouters.map('/userSelectAddress',function(transition){
      spaRouters.asyncFun('./pages/userSelectAddress.js?v='+cVersions,transition)
  	})
    spaRouters.map('/disclaimer',function(transition){
      spaRouters.asyncFun('./pages/disclaimer.js?v='+cVersions,transition)
  	})
    spaRouters.map('/login',function(transition){
      spaRouters.asyncFun('./pages/login.js?v='+cVersions,transition)
    })
    spaRouters.map('/comment',function(transition){
      spaRouters.asyncFun('./pages/comment.js?v='+cVersions,transition)
    })
    spaRouters.map('/webim',function(transition){
      spaRouters.asyncFun('./pages/webim.js?v='+cVersions,transition)
  	})


    spaRouters.beforeEach(function(transition){
      setTimeout(function(){
        //模拟切换之前延迟，比如说做个异步登录信息验证
         transition.next()
      },100)
    })
    spaRouters.afterEach(function(transition){
      // console.log("切换之后dosomething")
    })
    spaRouters.init();

    function cGoBack(btn,url){
      var url = url || '';
      var go = -1;

      if(typeof(url)=='number'){
        go = url;
      }
      if(typeof(btn)=='number'){
        go = btn;
      }else if(typeof(btn)=="object"){
        var $btn = $(btn);
        var $pageView = $btn.closest('.page-view');
        $pageView.addClass('out');
      }
      var time =  200;
      GB_VAR['jumpTo'] = '';
      setTimeout(function(){
        if(url!=''){
          redirect(url);
        }
        window.history.go(go);
      },time);
    }
    GB_VAR['rv'] = cVersions;
    GB_VAR['userBaseInfo'] = '';
    GB_VAR['webim_access_token'] = '';
    GB_VAR['jumpTo'] = '';
    GB_VAR['doMenthods'] = '';
    GB_VAR['addRoute_datas'] = {};
    GB_VAR['seat_picker'] = '';
    GB_VAR['dt_picker']='';
    GB_VAR['user_info'] = '';
    GB_VAR['userAvatar'] = '';
    GB_VAR['flags'] = {};
    GB_VAR['temp'] = {};
    GB_VAR['local_position'] = '';
    GB_VAR['local_city'] = {};
    // console.log(history)
   var pageMethods = {};
  </script>
  <script type="text/javascript" src="./js/common/bootstrap.min.js"></script>
  <script type="text/javascript" src="./js/cp.model.js?v=3"></script>
  <script>

    function cCheckLogin(callback){
      var token = window.localStorage.getItem('CP_U_TOKEN');
      if(!token){
        cGoLogin();
        return false;
      }

      cAccessAjax({
        type:'get',
        dataType:'json',
        url:cApiUrl.checkLogin,
        success:function(rs){
          if(rs.code === 0){
            // console.log(rs.data)
            var userDatas = rs.data;
            userDatas.loginname = userDatas.loginname.toLowerCase()
            GB_VAR['userBaseInfo'] = userDatas;
            // console.log(GB_VAR['userBaseInfo'])
            // GB_VAR['user_info'] = userDatas;
            // console.log(GB_VAR['user_info']);
          }else{
            window.localStorage.removeItem('CP_U_TOKEN');
            if(!cCheckLoginByCode(rs.code)){return false;}

          }
          if(typeof(callback)=='function'){
            callback(rs);
          }
        },
        complete:function(){
          // alert(2)
        }
      })
    }

    cCheckLogin()
    cLoadScript(cApiUrl.aMapScript); //加载高德地图api
  </script>
  <link rel="stylesheet" type="text/css" href="./css/cropper.min.css" />
  <script type="text/javascript" src="./js/common/cropper.min.js"></script>
  <!-- <script type="text/javascript" src="./js/crop_avatar.js"></script> -->

  <!-- <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.4.0&key=6c4a1cb1f9d8e3f64388079c4d7638c1"></script> -->
  <!--<script type="text/javascript" src="./js/common/material.min.js"></script>

  <script type="text/javascript" src="./js/common/nouislider.min.js"></script>
  <script type="text/javascript" src="./js/common/material-kit.js"></script>-->
</html>
